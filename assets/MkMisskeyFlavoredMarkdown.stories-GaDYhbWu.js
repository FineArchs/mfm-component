import{h as I}from"./vue.esm-bundler-hQKkb8Y4.js";import{c as q}from"./_commonjsHelpers-5-cIlDoe.js";var K={},A={},w={},S={},sd={};(function(u){Object.defineProperty(u,"__esModule",{value:!0}),u.createLanguage=u.lazy=u.lineEnd=u.lineBegin=u.char=u.newline=u.crlf=u.lf=u.cr=u.notMatch=u.alt=u.seq=u.regexp=u.str=u.Parser=u.failure=u.success=void 0;function m(l,c){return{success:!0,value:c,index:l}}u.success=m;function p(){return{success:!1}}u.failure=p;class E{constructor(c,n){this.handler=(e,r,f)=>{if(f.trace&&this.name!=null){const t=`${r}`;console.log(`${t.padEnd(6," ")}enter ${this.name}`);const b=c(e,r,f);if(b.success){const s=`${r}:${b.index}`;console.log(`${s.padEnd(6," ")}match ${this.name}`)}else{const s=`${r}`;console.log(`${s.padEnd(6," ")}fail ${this.name}`)}return b}return c(e,r,f)},this.name=n}map(c){return new E((n,e,r)=>{const f=this.handler(n,e,r);return f.success?m(f.index,c(f.value)):f})}text(){return new E((c,n,e)=>{const r=this.handler(c,n,e);if(!r.success)return r;const f=c.slice(n,r.index);return m(r.index,f)})}many(c){return new E((n,e,r)=>{let f,t=e;const b=[];for(;t<n.length&&(f=this.handler(n,t,r),!!f.success);)t=f.index,b.push(f.value);return b.length<c?p():m(t,b)})}sep(c,n){if(n<1)throw new Error('"min" must be a value greater than or equal to 1.');return g([this,g([c,this],1).many(n-1)]).map(e=>[e[0],...e[1]])}option(){return M([this,_(null)])}}u.Parser=E;function i(l){return new E((c,n,e)=>c.length-n<l.length||c.substr(n,l.length)!==l?p():m(n+l.length,l))}u.str=i;function d(l){const c=RegExp(`^(?:${l.source})`,l.flags);return new E((n,e,r)=>{const f=n.slice(e),t=c.exec(f);return t==null?p():m(e+t[0].length,t[0])})}u.regexp=d;function g(l,c){return new E((n,e,r)=>{let f,t=e;const b=[];for(let s=0;s<l.length;s++){if(f=l[s].handler(n,t,r),!f.success)return f;t=f.index,b.push(f.value)}return m(t,c!=null?b[c]:b)})}u.seq=g;function M(l){return new E((c,n,e)=>{let r;for(let f=0;f<l.length;f++)if(r=l[f].handler(c,n,e),r.success)return r;return p()})}u.alt=M;function _(l){return new E((c,n,e)=>m(n,l))}function O(l){return new E((c,n,e)=>l.handler(c,n,e).success?p():m(n,null))}u.notMatch=O,u.cr=i("\r"),u.lf=i(`
`),u.crlf=i(`\r
`),u.newline=M([u.crlf,u.cr,u.lf]),u.char=new E((l,c,n)=>{if(l.length-c<1)return p();const e=l.charAt(c);return m(c+1,e)}),u.lineBegin=new E((l,c,n)=>c===0||u.cr.handler(l,c-1,n).success||u.lf.handler(l,c-1,n).success?m(c,null):p()),u.lineEnd=new E((l,c,n)=>c===l.length||u.cr.handler(l,c,n).success||u.lf.handler(l,c,n).success?m(c,null):p());function y(l){const c=new E((n,e,r)=>(c.handler=l().handler,c.handler(n,e,r)));return c}u.lazy=y;function a(l){const c={};for(const n of Object.keys(l))c[n]=y(()=>{const e=l[n](c);if(e==null)throw new Error("syntax must return a parser.");return e.name=n,e});return c}u.createLanguage=a})(sd);var $={},z={};(function(u){Object.defineProperty(u,"__esModule",{value:!0}),u.TEXT=u.PLAIN=u.FN=u.LINK=u.N_URL=u.HASHTAG=u.MENTION=u.MATH_INLINE=u.INLINE_CODE=u.STRIKE=u.ITALIC=u.SMALL=u.BOLD=u.EMOJI_CODE=u.UNI_EMOJI=u.CENTER=u.MATH_BLOCK=u.CODE_BLOCK=u.SEARCH=u.QUOTE=u.isMfmBlock=void 0;const m=["quote","search","blockCode","mathBlock","center"];function p(o){return m.includes(o.type)}u.isMfmBlock=p;const E=o=>({type:"quote",children:o});u.QUOTE=E;const i=(o,N)=>({type:"search",props:{query:o,content:N}});u.SEARCH=i;const d=(o,N)=>({type:"blockCode",props:{code:o,lang:N}});u.CODE_BLOCK=d;const g=o=>({type:"mathBlock",props:{formula:o}});u.MATH_BLOCK=g;const M=o=>({type:"center",children:o});u.CENTER=M;const _=o=>({type:"unicodeEmoji",props:{emoji:o}});u.UNI_EMOJI=_;const O=o=>({type:"emojiCode",props:{name:o}});u.EMOJI_CODE=O;const y=o=>({type:"bold",children:o});u.BOLD=y;const a=o=>({type:"small",children:o});u.SMALL=a;const l=o=>({type:"italic",children:o});u.ITALIC=l;const c=o=>({type:"strike",children:o});u.STRIKE=c;const n=o=>({type:"inlineCode",props:{code:o}});u.INLINE_CODE=n;const e=o=>({type:"mathInline",props:{formula:o}});u.MATH_INLINE=e;const r=(o,N,v)=>({type:"mention",props:{username:o,host:N,acct:v}});u.MENTION=r;const f=o=>({type:"hashtag",props:{hashtag:o}});u.HASHTAG=f;const t=(o,N)=>{const v={type:"url",props:{url:o}};return N&&(v.props.brackets=N),v};u.N_URL=t;const b=(o,N,v)=>({type:"link",props:{silent:o,url:N},children:v});u.LINK=b;const s=(o,N,v)=>({type:"fn",props:{name:o,args:N},children:v});u.FN=s;const h=o=>({type:"plain",children:[(0,u.TEXT)(o)]});u.PLAIN=h;const T=o=>({type:"text",props:{text:o}});u.TEXT=T})(z);Object.defineProperty($,"__esModule",{value:!0});$.inspectOne=$.stringifyTree=$.stringifyNode=$.mergeText=void 0;const U=z;function bd(u){const m=[],p=[];function E(){p.length>0&&(m.push((0,U.TEXT)(p.join(""))),p.length=0)}const i=u.flat(1);for(const d of i)typeof d=="string"?p.push(d):!Array.isArray(d)&&d.type==="text"?p.push(d.props.text):(E(),m.push(d));return E(),m}$.mergeText=bd;function id(u){var m;switch(u.type){case"quote":return j(u.children).split(`
`).map(p=>`> ${p}`).join(`
`);case"search":return u.props.content;case"blockCode":return`\`\`\`${(m=u.props.lang)!==null&&m!==void 0?m:""}
${u.props.code}
\`\`\``;case"mathBlock":return`\\[
${u.props.formula}
\\]`;case"center":return`<center>
${j(u.children)}
</center>`;case"emojiCode":return`:${u.props.name}:`;case"unicodeEmoji":return u.props.emoji;case"bold":return`**${j(u.children)}**`;case"small":return`<small>${j(u.children)}</small>`;case"italic":return`<i>${j(u.children)}</i>`;case"strike":return`~~${j(u.children)}~~`;case"inlineCode":return`\`${u.props.code}\``;case"mathInline":return`\\(${u.props.formula}\\)`;case"mention":return u.props.acct;case"hashtag":return`#${u.props.hashtag}`;case"url":return u.props.brackets?`<${u.props.url}>`:u.props.url;case"link":return`${u.props.silent?"?":""}[${j(u.children)}](${u.props.url})`;case"fn":{const p=Object.keys(u.props.args).map(i=>{const d=u.props.args[i];return d===!0?i:`${i}=${d}`}),E=p.length>0?"."+p.join(","):"";return`$[${u.props.name}${E} ${j(u.children)}]`}case"plain":return`<plain>
${j(u.children)}
</plain>`;case"text":return u.props.text}throw new Error("unknown mfm node")}$.stringifyNode=id;var P;(function(u){u[u.none=0]="none",u[u.inline=1]="inline",u[u.block=2]="block"})(P||(P={}));function j(u){const m=[];let p=P.none;for(const E of u){let i=!0;(0,U.isMfmBlock)(E)?(p===P.none&&(i=!1),p=P.block):((p===P.none||p===P.inline)&&(i=!1),p=P.inline),i&&m.push((0,U.TEXT)(`
`)),m.push(E)}return m.map(E=>id(E)).join("")}$.stringifyTree=j;function ld(u,m){if(m(u),u.children!=null)for(const p of u.children)ld(p,m)}$.inspectOne=ld;var F={};Object.defineProperty(F,"__esModule",{value:!0});F.default=/(?:\ud83d\udc68\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83e\uddd1\ud83c[\udffc-\udfff]|\ud83e\uddd1\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83e\uddd1\ud83c[\udffb\udffd-\udfff]|\ud83e\uddd1\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83e\uddd1\ud83c[\udffb\udffc\udffe\udfff]|\ud83e\uddd1\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83e\uddd1\ud83c[\udffb-\udffd\udfff]|\ud83e\uddd1\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83e\uddd1\ud83c[\udffb-\udffe]|\ud83d\udc68\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffc-\udfff]|\ud83d\udc68\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffd-\udfff]|\ud83d\udc68\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffc\udffe\udfff]|\ud83d\udc68\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffd\udfff]|\ud83d\udc68\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffe]|\ud83d\udc69\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffc-\udfff]|\ud83d\udc69\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffc-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffd-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb\udffd-\udfff]|\ud83d\udc69\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffc\udffe\udfff]|\ud83d\udc69\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb\udffc\udffe\udfff]|\ud83d\udc69\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffd\udfff]|\ud83d\udc69\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb-\udffd\udfff]|\ud83d\udc69\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffe]|\ud83d\udc69\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb-\udffe]|\ud83e\uddd1\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83e\uddd1\ud83c[\udffc-\udfff]|\ud83e\uddd1\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83e\uddd1\ud83c[\udffb\udffd-\udfff]|\ud83e\uddd1\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83e\uddd1\ud83c[\udffb\udffc\udffe\udfff]|\ud83e\uddd1\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83e\uddd1\ud83c[\udffb-\udffd\udfff]|\ud83e\uddd1\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83e\uddd1\ud83c[\udffb-\udffe]|\ud83e\uddd1\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83d\udc68\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68|\ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d[\udc68\udc69]|\ud83e\udef1\ud83c\udffb\u200d\ud83e\udef2\ud83c[\udffc-\udfff]|\ud83e\udef1\ud83c\udffc\u200d\ud83e\udef2\ud83c[\udffb\udffd-\udfff]|\ud83e\udef1\ud83c\udffd\u200d\ud83e\udef2\ud83c[\udffb\udffc\udffe\udfff]|\ud83e\udef1\ud83c\udffe\u200d\ud83e\udef2\ud83c[\udffb-\udffd\udfff]|\ud83e\udef1\ud83c\udfff\u200d\ud83e\udef2\ud83c[\udffb-\udffe]|\ud83d\udc68\u200d\u2764\ufe0f\u200d\ud83d\udc68|\ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d[\udc68\udc69]|\ud83e\uddd1\u200d\ud83e\udd1d\u200d\ud83e\uddd1|\ud83d\udc6b\ud83c[\udffb-\udfff]|\ud83d\udc6c\ud83c[\udffb-\udfff]|\ud83d\udc6d\ud83c[\udffb-\udfff]|\ud83d\udc8f\ud83c[\udffb-\udfff]|\ud83d\udc91\ud83c[\udffb-\udfff]|\ud83e\udd1d\ud83c[\udffb-\udfff]|\ud83d[\udc6b-\udc6d\udc8f\udc91]|\ud83e\udd1d)|(?:\ud83d[\udc68\udc69]|\ud83e\uddd1)(?:\ud83c[\udffb-\udfff])?\u200d(?:\u2695\ufe0f|\u2696\ufe0f|\u2708\ufe0f|\ud83c[\udf3e\udf73\udf7c\udf84\udf93\udfa4\udfa8\udfeb\udfed]|\ud83d[\udcbb\udcbc\udd27\udd2c\ude80\ude92]|\ud83e[\uddaf-\uddb3\uddbc\uddbd])|(?:\ud83c[\udfcb\udfcc]|\ud83d[\udd74\udd75]|\u26f9)((?:\ud83c[\udffb-\udfff]|\ufe0f)\u200d[\u2640\u2642]\ufe0f)|(?:\ud83c[\udfc3\udfc4\udfca]|\ud83d[\udc6e\udc70\udc71\udc73\udc77\udc81\udc82\udc86\udc87\ude45-\ude47\ude4b\ude4d\ude4e\udea3\udeb4-\udeb6]|\ud83e[\udd26\udd35\udd37-\udd39\udd3d\udd3e\uddb8\uddb9\uddcd-\uddcf\uddd4\uddd6-\udddd])(?:\ud83c[\udffb-\udfff])?\u200d[\u2640\u2642]\ufe0f|(?:\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83c\udff3\ufe0f\u200d\u26a7\ufe0f|\ud83c\udff3\ufe0f\u200d\ud83c\udf08|\ud83d\ude36\u200d\ud83c\udf2b\ufe0f|\u2764\ufe0f\u200d\ud83d\udd25|\u2764\ufe0f\u200d\ud83e\ude79|\ud83c\udff4\u200d\u2620\ufe0f|\ud83d\udc15\u200d\ud83e\uddba|\ud83d\udc3b\u200d\u2744\ufe0f|\ud83d\udc41\u200d\ud83d\udde8|\ud83d\udc68\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83d\udc6f\u200d\u2640\ufe0f|\ud83d\udc6f\u200d\u2642\ufe0f|\ud83d\ude2e\u200d\ud83d\udca8|\ud83d\ude35\u200d\ud83d\udcab|\ud83e\udd3c\u200d\u2640\ufe0f|\ud83e\udd3c\u200d\u2642\ufe0f|\ud83e\uddde\u200d\u2640\ufe0f|\ud83e\uddde\u200d\u2642\ufe0f|\ud83e\udddf\u200d\u2640\ufe0f|\ud83e\udddf\u200d\u2642\ufe0f|\ud83d\udc08\u200d\u2b1b|\ud83d\udc26\u200d\u2b1b)|[#*0-9]\ufe0f?\u20e3|(?:[©®\u2122\u265f]\ufe0f)|(?:\ud83c[\udc04\udd70\udd71\udd7e\udd7f\ude02\ude1a\ude2f\ude37\udf21\udf24-\udf2c\udf36\udf7d\udf96\udf97\udf99-\udf9b\udf9e\udf9f\udfcd\udfce\udfd4-\udfdf\udff3\udff5\udff7]|\ud83d[\udc3f\udc41\udcfd\udd49\udd4a\udd6f\udd70\udd73\udd76-\udd79\udd87\udd8a-\udd8d\udda5\udda8\uddb1\uddb2\uddbc\uddc2-\uddc4\uddd1-\uddd3\udddc-\uddde\udde1\udde3\udde8\uddef\uddf3\uddfa\udecb\udecd-\udecf\udee0-\udee5\udee9\udef0\udef3]|[\u203c\u2049\u2139\u2194-\u2199\u21a9\u21aa\u231a\u231b\u2328\u23cf\u23ed-\u23ef\u23f1\u23f2\u23f8-\u23fa\u24c2\u25aa\u25ab\u25b6\u25c0\u25fb-\u25fe\u2600-\u2604\u260e\u2611\u2614\u2615\u2618\u2620\u2622\u2623\u2626\u262a\u262e\u262f\u2638-\u263a\u2640\u2642\u2648-\u2653\u2660\u2663\u2665\u2666\u2668\u267b\u267f\u2692-\u2697\u2699\u269b\u269c\u26a0\u26a1\u26a7\u26aa\u26ab\u26b0\u26b1\u26bd\u26be\u26c4\u26c5\u26c8\u26cf\u26d1\u26d3\u26d4\u26e9\u26ea\u26f0-\u26f5\u26f8\u26fa\u26fd\u2702\u2708\u2709\u270f\u2712\u2714\u2716\u271d\u2721\u2733\u2734\u2744\u2747\u2757\u2763\u2764\u27a1\u2934\u2935\u2b05-\u2b07\u2b1b\u2b1c\u2b50\u2b55\u3030\u303d\u3297\u3299])(?:\ufe0f|(?!\ufe0e))|(?:(?:\ud83c[\udfcb\udfcc]|\ud83d[\udd74\udd75\udd90]|\ud83e\udef0|[\u261d\u26f7\u26f9\u270c\u270d])(?:\ufe0f|(?!\ufe0e))|(?:\ud83c[\udf85\udfc2-\udfc4\udfc7\udfca]|\ud83d[\udc42\udc43\udc46-\udc50\udc66-\udc69\udc6e\udc70-\udc78\udc7c\udc81-\udc83\udc85-\udc87\udcaa\udd7a\udd95\udd96\ude45-\ude47\ude4b-\ude4f\udea3\udeb4-\udeb6\udec0\udecc]|\ud83e[\udd0c\udd0f\udd18-\udd1c\udd1e\udd1f\udd26\udd30-\udd39\udd3d\udd3e\udd77\uddb5\uddb6\uddb8\uddb9\uddbb\uddcd-\uddcf\uddd1-\udddd\udec3-\udec5\udef1-\udef8]|[\u270a\u270b]))(?:\ud83c[\udffb-\udfff])?|(?:\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc65\udb40\udc6e\udb40\udc67\udb40\udc7f|\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc73\udb40\udc63\udb40\udc74\udb40\udc7f|\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc77\udb40\udc6c\udb40\udc73\udb40\udc7f|\ud83c\udde6\ud83c[\udde8-\uddec\uddee\uddf1\uddf2\uddf4\uddf6-\uddfa\uddfc\uddfd\uddff]|\ud83c\udde7\ud83c[\udde6\udde7\udde9-\uddef\uddf1-\uddf4\uddf6-\uddf9\uddfb\uddfc\uddfe\uddff]|\ud83c\udde8\ud83c[\udde6\udde8\udde9\uddeb-\uddee\uddf0-\uddf5\uddf7\uddfa-\uddff]|\ud83c\udde9\ud83c[\uddea\uddec\uddef\uddf0\uddf2\uddf4\uddff]|\ud83c\uddea\ud83c[\udde6\udde8\uddea\uddec\udded\uddf7-\uddfa]|\ud83c\uddeb\ud83c[\uddee-\uddf0\uddf2\uddf4\uddf7]|\ud83c\uddec\ud83c[\udde6\udde7\udde9-\uddee\uddf1-\uddf3\uddf5-\uddfa\uddfc\uddfe]|\ud83c\udded\ud83c[\uddf0\uddf2\uddf3\uddf7\uddf9\uddfa]|\ud83c\uddee\ud83c[\udde8-\uddea\uddf1-\uddf4\uddf6-\uddf9]|\ud83c\uddef\ud83c[\uddea\uddf2\uddf4\uddf5]|\ud83c\uddf0\ud83c[\uddea\uddec-\uddee\uddf2\uddf3\uddf5\uddf7\uddfc\uddfe\uddff]|\ud83c\uddf1\ud83c[\udde6-\udde8\uddee\uddf0\uddf7-\uddfb\uddfe]|\ud83c\uddf2\ud83c[\udde6\udde8-\udded\uddf0-\uddff]|\ud83c\uddf3\ud83c[\udde6\udde8\uddea-\uddec\uddee\uddf1\uddf4\uddf5\uddf7\uddfa\uddff]|\ud83c\uddf4\ud83c\uddf2|\ud83c\uddf5\ud83c[\udde6\uddea-\udded\uddf0-\uddf3\uddf7-\uddf9\uddfc\uddfe]|\ud83c\uddf6\ud83c\udde6|\ud83c\uddf7\ud83c[\uddea\uddf4\uddf8\uddfa\uddfc]|\ud83c\uddf8\ud83c[\udde6-\uddea\uddec-\uddf4\uddf7-\uddf9\uddfb\uddfd-\uddff]|\ud83c\uddf9\ud83c[\udde6\udde8\udde9\uddeb-\udded\uddef-\uddf4\uddf7\uddf9\uddfb\uddfc\uddff]|\ud83c\uddfa\ud83c[\udde6\uddec\uddf2\uddf3\uddf8\uddfe\uddff]|\ud83c\uddfb\ud83c[\udde6\udde8\uddea\uddec\uddee\uddf3\uddfa]|\ud83c\uddfc\ud83c[\uddeb\uddf8]|\ud83c\uddfd\ud83c\uddf0|\ud83c\uddfe\ud83c[\uddea\uddf9]|\ud83c\uddff\ud83c[\udde6\uddf2\uddfc]|\ud83c[\udccf\udd8e\udd91-\udd9a\udde6-\uddff\ude01\ude32-\ude36\ude38-\ude3a\ude50\ude51\udf00-\udf20\udf2d-\udf35\udf37-\udf7c\udf7e-\udf84\udf86-\udf93\udfa0-\udfc1\udfc5\udfc6\udfc8\udfc9\udfcf-\udfd3\udfe0-\udff0\udff4\udff8-\udfff]|\ud83d[\udc00-\udc3e\udc40\udc44\udc45\udc51-\udc65\udc6a\udc6f\udc79-\udc7b\udc7d-\udc80\udc84\udc88-\udc8e\udc90\udc92-\udca9\udcab-\udcfc\udcff-\udd3d\udd4b-\udd4e\udd50-\udd67\udda4\uddfb-\ude44\ude48-\ude4a\ude80-\udea2\udea4-\udeb3\udeb7-\udebf\udec1-\udec5\uded0-\uded2\uded5-\uded7\udedc-\udedf\udeeb\udeec\udef4-\udefc\udfe0-\udfeb\udff0]|\ud83e[\udd0d\udd0e\udd10-\udd17\udd20-\udd25\udd27-\udd2f\udd3a\udd3c\udd3f-\udd45\udd47-\udd76\udd78-\uddb4\uddb7\uddba\uddbc-\uddcc\uddd0\uddde-\uddff\ude70-\ude7c\ude80-\ude88\ude90-\udebd\udebf-\udec2\udece-\udedb\udee0-\udee8]|[\u23e9-\u23ec\u23f0\u23f3\u267e\u26ce\u2705\u2728\u274c\u274e\u2753-\u2755\u2795-\u2797\u27b0\u27bf\ue50a])|\ufe0f/g;var k;function md(){if(k)return S;k=1;var u=q&&q.__createBinding||(Object.create?function(e,r,f,t){t===void 0&&(t=f);var b=Object.getOwnPropertyDescriptor(r,f);(!b||("get"in b?!r.__esModule:b.writable||b.configurable))&&(b={enumerable:!0,get:function(){return r[f]}}),Object.defineProperty(e,t,b)}:function(e,r,f,t){t===void 0&&(t=f),e[t]=r[f]}),m=q&&q.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),p=q&&q.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var f in e)f!=="default"&&Object.prototype.hasOwnProperty.call(e,f)&&u(r,e,f);return m(r,e),r},E=q&&q.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(S,"__esModule",{value:!0}),S.language=void 0;const i=p(od()),d=p(sd),g=$,M=E(F),_=d.regexp(/[\u0020\u3000\t]/),O=d.regexp(/[a-z0-9]/i),y=d.alt([d.crlf,d.cr,d.lf]);function a(e){return new d.Parser((r,f,t)=>{const b=[];let s=f;for(let h=0;h<e.length;h++){const T=e[h].handler(r,s,t);if(!T.success)return s===f?d.failure():d.success(s,r.slice(f,s));b.push(T.value),s=T.index}return d.success(s,b)})}const l=new d.Parser((e,r,f)=>f.linkLabel?d.failure():d.success(r,null)),c=new d.Parser((e,r,f)=>f.depth<f.nestLimit?d.success(r,null):d.failure());function n(e,r){const f=d.alt([d.seq([c,e],1),r??d.char]);return new d.Parser((t,b,s)=>{s.depth++;const h=f.handler(t,b,s);return s.depth--,h})}return S.language=d.createLanguage({fullParser:e=>e.full.many(0),simpleParser:e=>e.simple.many(0),full:e=>d.alt([e.unicodeEmoji,e.centerTag,e.smallTag,e.plainTag,e.boldTag,e.italicTag,e.strikeTag,e.urlAlt,e.big,e.boldAsta,e.italicAsta,e.boldUnder,e.italicUnder,e.codeBlock,e.inlineCode,e.quote,e.mathBlock,e.mathInline,e.strikeWave,e.fn,e.mention,e.hashtag,e.emojiCode,e.link,e.url,e.search,e.text]),simple:e=>d.alt([e.unicodeEmoji,e.emojiCode,e.text]),inline:e=>d.alt([e.unicodeEmoji,e.smallTag,e.plainTag,e.boldTag,e.italicTag,e.strikeTag,e.urlAlt,e.big,e.boldAsta,e.italicAsta,e.boldUnder,e.italicUnder,e.inlineCode,e.mathInline,e.strikeWave,e.fn,e.mention,e.hashtag,e.emojiCode,e.link,e.url,e.text]),quote:e=>{const r=d.seq([d.str(">"),_.option(),d.seq([d.notMatch(y),d.char],1).many(0).text()],2).sep(y,1),f=d.seq([y.option(),y.option(),d.lineBegin,r,y.option(),y.option()],3);return new d.Parser((t,b,s)=>{let h;if(h=f.handler(t,b,s),!h.success)return h;const T=h.value,o=h.index;return T.length===1&&T[0].length===0?d.failure():(h=n(e.fullParser).many(0).handler(T.join(`
`),0,s),h.success?d.success(o,i.QUOTE((0,g.mergeText)(h.value))):h)})},codeBlock:e=>{const r=d.str("```");return d.seq([y.option(),d.lineBegin,r,d.seq([d.notMatch(y),d.char],1).many(0),y,d.seq([d.notMatch(d.seq([y,r,d.lineEnd])),d.char],1).many(1),y,r,d.lineEnd,y.option()]).map(f=>{const t=f[3].join("").trim(),b=f[5].join("");return i.CODE_BLOCK(b,t.length>0?t:null)})},mathBlock:e=>{const r=d.str("\\["),f=d.str("\\]");return d.seq([y.option(),d.lineBegin,r,y.option(),d.seq([d.notMatch(d.seq([y.option(),f])),d.char],1).many(1),y.option(),f,d.lineEnd,y.option()]).map(t=>{const b=t[4].join("");return i.MATH_BLOCK(b)})},centerTag:e=>{const r=d.str("<center>"),f=d.str("</center>");return d.seq([y.option(),d.lineBegin,r,y.option(),d.seq([d.notMatch(d.seq([y.option(),f])),n(e.inline)],1).many(1),y.option(),f,d.lineEnd,y.option()]).map(t=>i.CENTER((0,g.mergeText)(t[4])))},big:e=>{const r=d.str("***");return a([r,d.seq([d.notMatch(r),n(e.inline)],1).many(1),r]).map(f=>typeof f=="string"?f:i.FN("tada",{},(0,g.mergeText)(f[1])))},boldAsta:e=>{const r=d.str("**");return a([r,d.seq([d.notMatch(r),n(e.inline)],1).many(1),r]).map(f=>typeof f=="string"?f:i.BOLD((0,g.mergeText)(f[1])))},boldTag:e=>{const r=d.str("<b>"),f=d.str("</b>");return a([r,d.seq([d.notMatch(f),n(e.inline)],1).many(1),f]).map(t=>typeof t=="string"?t:i.BOLD((0,g.mergeText)(t[1])))},boldUnder:e=>{const r=d.str("__");return d.seq([r,d.alt([O,_]).many(1),r]).map(f=>i.BOLD((0,g.mergeText)(f[1])))},smallTag:e=>{const r=d.str("<small>"),f=d.str("</small>");return a([r,d.seq([d.notMatch(f),n(e.inline)],1).many(1),f]).map(t=>typeof t=="string"?t:i.SMALL((0,g.mergeText)(t[1])))},italicTag:e=>{const r=d.str("<i>"),f=d.str("</i>");return a([r,d.seq([d.notMatch(f),n(e.inline)],1).many(1),f]).map(t=>typeof t=="string"?t:i.ITALIC((0,g.mergeText)(t[1])))},italicAsta:e=>{const r=d.str("*"),f=d.seq([r,d.alt([O,_]).many(1),r]);return new d.Parser((t,b,s)=>{const h=f.handler(t,b,s);if(!h.success)return d.failure();const T=t.slice(0,b);return/[a-z0-9]$/i.test(T)?d.failure():d.success(h.index,i.ITALIC((0,g.mergeText)(h.value[1])))})},italicUnder:e=>{const r=d.str("_"),f=d.seq([r,d.alt([O,_]).many(1),r]);return new d.Parser((t,b,s)=>{const h=f.handler(t,b,s);if(!h.success)return d.failure();const T=t.slice(0,b);return/[a-z0-9]$/i.test(T)?d.failure():d.success(h.index,i.ITALIC((0,g.mergeText)(h.value[1])))})},strikeTag:e=>{const r=d.str("<s>"),f=d.str("</s>");return a([r,d.seq([d.notMatch(f),n(e.inline)],1).many(1),f]).map(t=>typeof t=="string"?t:i.STRIKE((0,g.mergeText)(t[1])))},strikeWave:e=>{const r=d.str("~~");return a([r,d.seq([d.notMatch(d.alt([r,y])),n(e.inline)],1).many(1),r]).map(f=>typeof f=="string"?f:i.STRIKE((0,g.mergeText)(f[1])))},unicodeEmoji:e=>{const r=RegExp(M.default.source);return d.regexp(r).map(f=>i.UNI_EMOJI(f))},plainTag:e=>{const r=d.str("<plain>"),f=d.str("</plain>");return d.seq([r,y.option(),d.seq([d.notMatch(d.seq([y.option(),f])),d.char],1).many(1).text(),y.option(),f],2).map(t=>i.PLAIN(t))},fn:e=>{const r=new d.Parser((s,h,T)=>{const o=d.regexp(/[a-z0-9_]+/i).handler(s,h,T);return o.success?d.success(o.index,o.value):o}),f=d.seq([d.regexp(/[a-z0-9_]+/i),d.seq([d.str("="),d.regexp(/[a-z0-9_.-]+/i)],1).option()]).map(s=>({k:s[0],v:s[1]!=null?s[1]:!0})),t=d.seq([d.str("."),f.sep(d.str(","),1)],1).map(s=>{const h={};for(const T of s)h[T.k]=T.v;return h}),b=d.str("]");return a([d.str("$["),r,t.option(),d.str(" "),d.seq([d.notMatch(b),n(e.inline)],1).many(1),b]).map(s=>{if(typeof s=="string")return s;const h=s[1],T=s[2]||{},o=s[4];return i.FN(h,T,(0,g.mergeText)(o))})},inlineCode:e=>{const r=d.str("`");return d.seq([r,d.seq([d.notMatch(d.alt([r,d.str("´"),y])),d.char],1).many(1),r]).map(f=>i.INLINE_CODE(f[1].join("")))},mathInline:e=>{const r=d.str("\\("),f=d.str("\\)");return d.seq([r,d.seq([d.notMatch(d.alt([f,y])),d.char],1).many(1),f]).map(t=>i.MATH_INLINE(t[1].join("")))},mention:e=>{const r=d.seq([l,d.str("@"),d.regexp(/[a-z0-9_-]+/i),d.seq([d.str("@"),d.regexp(/[a-z0-9_.-]+/i)],1).option()]);return new d.Parser((f,t,b)=>{let s;if(s=r.handler(f,t,b),!s.success)return d.failure();const h=f.slice(0,t);if(/[a-z0-9]$/i.test(h))return d.failure();let T=!1;const o=s.index,N=s.value[2],v=s.value[3];let L=v;v!=null&&(s=/[.-]+$/.exec(v),s!=null&&(L=v.slice(0,-1*s[0].length),L.length===0&&(T=!0,L=null)));let B=N;if(s=/-+$/.exec(N),s!=null&&(L==null?B=N.slice(0,-1*s[0].length):T=!0),(B.length===0||B[0]==="-")&&(T=!0),L!=null&&/^[.-]/.test(L)&&(T=!0),T)return d.success(o,f.slice(t,o));const J=L!=null?`@${B}@${L}`:`@${B}`;return d.success(t+J.length,i.MENTION(B,L,J))})},hashtag:e=>{const r=d.str("#"),f=d.seq([d.notMatch(d.alt([d.regexp(/[ \u3000\t.,!?'"#:/[\]【】()「」（）<>]/),_,y])),d.char],1),t=d.lazy(()=>d.alt([d.seq([d.str("("),n(t,f).many(0),d.str(")")]),d.seq([d.str("["),n(t,f).many(0),d.str("]")]),d.seq([d.str("「"),n(t,f).many(0),d.str("」")]),d.seq([d.str("（"),n(t,f).many(0),d.str("）")]),f])),b=d.seq([l,r,t.many(1).text()],2);return new d.Parser((s,h,T)=>{const o=b.handler(s,h,T);if(!o.success)return d.failure();const N=s.slice(0,h);if(/[a-z0-9]$/i.test(N))return d.failure();const v=o.index,L=o.value;return/^[0-9]+$/.test(L)?d.failure():d.success(v,i.HASHTAG(L))})},emojiCode:e=>{const r=d.notMatch(d.regexp(/[a-z0-9]/i)),f=d.str(":");return d.seq([d.alt([d.lineBegin,r]),f,d.regexp(/[a-z0-9_+-]+/i),f,d.alt([d.lineEnd,r])],2).map(t=>i.EMOJI_CODE(t))},link:e=>{const r=new d.Parser((t,b,s)=>{s.linkLabel=!0;const h=e.inline.handler(t,b,s);return s.linkLabel=!1,h}),f=d.str("]");return d.seq([l,d.alt([d.str("?["),d.str("[")]),d.seq([d.notMatch(d.alt([f,y])),n(r)],1).many(1),f,d.str("("),d.alt([e.urlAlt,e.url]),d.str(")")]).map(t=>{const b=t[1]==="?[",s=t[2],h=t[5];return i.LINK(b,h.props.url,(0,g.mergeText)(s))})},url:e=>{const r=d.regexp(/[.,a-z0-9_/:%#@$&?!~=+-]/i),f=d.lazy(()=>d.alt([d.seq([d.str("("),n(f,r).many(0),d.str(")")]),d.seq([d.str("["),n(f,r).many(0),d.str("]")]),r])),t=d.seq([l,d.regexp(/https?:\/\//),f.many(1).text()]);return new d.Parser((b,s,h)=>{let T;if(T=t.handler(b,s,h),!T.success)return d.failure();const o=T.index;let N=o;const v=T.value[1];let L=T.value[2];return T=/[.,]+$/.exec(L),T!=null&&(N-=T[0].length,L=L.slice(0,-1*T[0].length),L.length===0)?d.success(o,b.slice(s,o)):d.success(N,i.N_URL(v+L,!1))})},urlAlt:e=>{const r=d.str("<"),f=d.str(">"),t=d.seq([l,r,d.regexp(/https?:\/\//),d.seq([d.notMatch(d.alt([f,_])),d.char],1).many(1),f]).text();return new d.Parser((b,s,h)=>{const T=t.handler(b,s,h);if(!T.success)return d.failure();const o=T.value.slice(1,T.value.length-1);return d.success(T.index,i.N_URL(o,!0))})},search:e=>{const r=d.alt([d.regexp(/\[(検索|search)\]/i),d.regexp(/(検索|search)/i)]);return d.seq([y.option(),d.lineBegin,d.seq([d.notMatch(d.alt([y,d.seq([_,r,d.lineEnd])])),d.char],1).many(1),_,r,d.lineEnd,y.option()]).map(f=>{const t=f[2].join("");return i.SEARCH(t,`${t}${f[3]}${f[4]}`)})},text:e=>d.char}),S}var X;function gd(){if(X)return w;X=1,Object.defineProperty(w,"__esModule",{value:!0}),w.simpleParser=w.fullParser=void 0;const u=md(),m=$;function p(i,d){const g=u.language.fullParser.handler(i,0,{nestLimit:d.nestLimit!=null?d.nestLimit:20,depth:0,linkLabel:!1,trace:!1});return(0,m.mergeText)(g.value)}w.fullParser=p;function E(i){const d=u.language.simpleParser.handler(i,0,{});return(0,m.mergeText)(d.value)}return w.simpleParser=E,w}var G;function hd(){if(G)return A;G=1,Object.defineProperty(A,"__esModule",{value:!0}),A.extract=A.inspect=A.toString=A.parseSimple=A.parse=void 0;const u=gd(),m=$;function p(M,_={}){return(0,u.fullParser)(M,{nestLimit:_.nestLimit})}A.parse=p;function E(M){return(0,u.simpleParser)(M)}A.parseSimple=E;function i(M){return Array.isArray(M)?(0,m.stringifyTree)(M):(0,m.stringifyNode)(M)}A.toString=i;function d(M,_){if(Array.isArray(M))for(const O of M)(0,m.inspectOne)(O,_);else(0,m.inspectOne)(M,_)}A.inspect=d;function g(M,_){const O=[];return d(M,y=>{_(y)&&O.push(y)}),O}return A.extract=g,A}var Q;function od(){return Q||(Q=1,function(u){Object.defineProperty(u,"__esModule",{value:!0}),u.TEXT=u.PLAIN=u.FN=u.LINK=u.N_URL=u.HASHTAG=u.MENTION=u.MATH_INLINE=u.INLINE_CODE=u.STRIKE=u.ITALIC=u.SMALL=u.BOLD=u.EMOJI_CODE=u.UNI_EMOJI=u.CENTER=u.MATH_BLOCK=u.CODE_BLOCK=u.SEARCH=u.QUOTE=u.extract=u.inspect=u.toString=u.parseSimple=u.parse=void 0;var m=hd();Object.defineProperty(u,"parse",{enumerable:!0,get:function(){return m.parse}}),Object.defineProperty(u,"parseSimple",{enumerable:!0,get:function(){return m.parseSimple}}),Object.defineProperty(u,"toString",{enumerable:!0,get:function(){return m.toString}}),Object.defineProperty(u,"inspect",{enumerable:!0,get:function(){return m.inspect}}),Object.defineProperty(u,"extract",{enumerable:!0,get:function(){return m.extract}});var p=z;Object.defineProperty(u,"QUOTE",{enumerable:!0,get:function(){return p.QUOTE}}),Object.defineProperty(u,"SEARCH",{enumerable:!0,get:function(){return p.SEARCH}}),Object.defineProperty(u,"CODE_BLOCK",{enumerable:!0,get:function(){return p.CODE_BLOCK}}),Object.defineProperty(u,"MATH_BLOCK",{enumerable:!0,get:function(){return p.MATH_BLOCK}}),Object.defineProperty(u,"CENTER",{enumerable:!0,get:function(){return p.CENTER}}),Object.defineProperty(u,"UNI_EMOJI",{enumerable:!0,get:function(){return p.UNI_EMOJI}}),Object.defineProperty(u,"EMOJI_CODE",{enumerable:!0,get:function(){return p.EMOJI_CODE}}),Object.defineProperty(u,"BOLD",{enumerable:!0,get:function(){return p.BOLD}}),Object.defineProperty(u,"SMALL",{enumerable:!0,get:function(){return p.SMALL}}),Object.defineProperty(u,"ITALIC",{enumerable:!0,get:function(){return p.ITALIC}}),Object.defineProperty(u,"STRIKE",{enumerable:!0,get:function(){return p.STRIKE}}),Object.defineProperty(u,"INLINE_CODE",{enumerable:!0,get:function(){return p.INLINE_CODE}}),Object.defineProperty(u,"MATH_INLINE",{enumerable:!0,get:function(){return p.MATH_INLINE}}),Object.defineProperty(u,"MENTION",{enumerable:!0,get:function(){return p.MENTION}}),Object.defineProperty(u,"HASHTAG",{enumerable:!0,get:function(){return p.HASHTAG}}),Object.defineProperty(u,"N_URL",{enumerable:!0,get:function(){return p.N_URL}}),Object.defineProperty(u,"LINK",{enumerable:!0,get:function(){return p.LINK}}),Object.defineProperty(u,"FN",{enumerable:!0,get:function(){return p.FN}}),Object.defineProperty(u,"PLAIN",{enumerable:!0,get:function(){return p.PLAIN}}),Object.defineProperty(u,"TEXT",{enumerable:!0,get:function(){return p.TEXT}})}(K)),K}var Y=od();const W=`
display: block;
margin: 8px;
padding: 6px 0 6px 12px;
color: var(--fg);
border-left: solid 3px var(--fg);
opacity: 0.7;
`.split(`
`).join(" ");function pd(u,m){var M;u.isNote;const p=u.nyaize&&u.nyaize==="respect"?(M=u.author)==null?void 0:M.isCat:!1;if(u.text==null||u.text==="")return;const E=u.parsedNodes??(u.plain?Y.parseSimple:Y.parse)(u.text),i=_=>_==null?null:_.match(/^[0-9.]+s$/)?_:null,d=!!u.useAnim,g=(_,O,y=!1)=>_.map(a=>{switch(a.type){case"text":{let l=a.props.text.replace(/(\r\n|\n|\r)/g,`
`);if(u.plain)return[l.replace(/\n/g," ")];{const c=[];for(const n of l.split(`
`))c.push(I("br")),c.push(n);return c.shift(),c}}case"bold":return[I("b",g(a.children,O))];case"strike":return[I("del",g(a.children,O))];case"italic":return I("i",{style:"font-style: oblique;"},g(a.children,O));case"fn":{let l;switch(a.props.name){case"tada":{const c=i(a.props.args.speed)??"1s",n=i(a.props.args.delay)??"0s";l="font-size: 150%;"+(d?`animation: tada ${c} linear infinite both; animation-delay: ${n};`:"");break}case"jelly":{const c=i(a.props.args.speed)??"1s",n=i(a.props.args.delay)??"0s";l=d?`animation: mfm-rubberBand ${c} linear infinite both; animation-delay: ${n};`:"";break}case"twitch":{const c=i(a.props.args.speed)??"0.5s",n=i(a.props.args.delay)??"0s";l=d?`animation: mfm-twitch ${c} ease infinite; animation-delay: ${n};`:"";break}case"shake":{const c=i(a.props.args.speed)??"0.5s",n=i(a.props.args.delay)??"0s";l=d?`animation: mfm-shake ${c} ease infinite; animation-delay: ${n};`:"";break}case"spin":{const c=a.props.args.left?"reverse":a.props.args.alternate?"alternate":"normal",n=a.props.args.x?"mfm-spinX":a.props.args.y?"mfm-spinY":"mfm-spin",e=i(a.props.args.speed)??"1.5s",r=i(a.props.args.delay)??"0s";l=d?`animation: ${n} ${e} linear infinite; animation-direction: ${c}; animation-delay: ${r};`:"";break}case"jump":{const c=i(a.props.args.speed)??"0.75s",n=i(a.props.args.delay)??"0s";l=d?`animation: mfm-jump ${c} linear infinite; animation-delay: ${n};`:"";break}case"bounce":{const c=i(a.props.args.speed)??"0.75s",n=i(a.props.args.delay)??"0s";l=d?`animation: mfm-bounce ${c} linear infinite; transform-origin: center bottom; animation-delay: ${n};`:"";break}case"flip":{l=`transform: ${a.props.args.h&&a.props.args.v?"scale(-1, -1)":a.props.args.v?"scaleY(-1)":"scaleX(-1)"};`;break}case"x2":return I("span",{class:"mfm-x2"},g(a.children,O*2));case"x3":return I("span",{class:"mfm-x3"},g(a.children,O*3));case"x4":return I("span",{class:"mfm-x4"},g(a.children,O*4));case"font":{const c=a.props.args.serif?"serif":a.props.args.monospace?"monospace":a.props.args.cursive?"cursive":a.props.args.fantasy?"fantasy":a.props.args.emoji?"emoji":a.props.args.math?"math":null;c&&(l=`font-family: ${c};`);break}case"blur":return I("span",{class:"_mfm_blur_"},g(a.children,O));case"rainbow":{if(!d)return I("span",{class:"_mfm_rainbow_fallback_"},g(a.children,O));const c=i(a.props.args.speed)??"1s",n=i(a.props.args.delay)??"0s";l=`animation: mfm-rainbow ${c} linear infinite; animation-delay: ${n};`;break}case"sparkle":{if(!d)return g(a.children,O);break}case"rotate":{l=`transform: rotate(${parseFloat(a.props.args.deg??"90")}deg); transform-origin: center center;`;break}case"position":{const c=parseFloat(a.props.args.x??"0"),n=parseFloat(a.props.args.y??"0");l=`transform: translateX(${c}em) translateY(${n}em);`;break}case"scale":{const c=Math.min(parseFloat(a.props.args.x??"1"),5),n=Math.min(parseFloat(a.props.args.y??"1"),5);l=`transform: scale(${c}, ${n});`,O=O*Math.max(c,n);break}case"fg":{let c=a.props.args.color;/^[0-9a-f]{3,6}$/i.test(c)||(c="f00"),l=`color: #${c};`;break}case"bg":{let c=a.props.args.color;/^[0-9a-f]{3,6}$/i.test(c)||(c="f00"),l=`background-color: #${c};`;break}case"ruby":if(a.children.length===1){const c=a.children[0];let n=c.type==="text"?c.props.text:"";return I("ruby",{},[n.split(" ")[0],I("rt",n.split(" ")[1])])}else{const c=a.children.at(-1);let n=c.type==="text"?c.props.text:"";return!y&&p&&(n=doNyaize(n)),I("ruby",{},[...g(a.children.slice(0,a.children.length-1),O),I("rt",n.trim())])}case"unixtime":{const c=a.children[0],n=parseInt(c.type==="text"?c.props.text:"");return I("span",{style:"display: inline-block; font-size: 90%; border: solid 1px var(--divider); border-radius: 999px; padding: 4px 10px 4px 6px;"},[I("i",{class:"ti ti-clock",style:"margin-right: 0.25em;"}),I(MkTime,{key:Math.random(),time:n*1e3,mode:"detail"})])}case"clickable":return I("span",{onClick(c){c.stopPropagation(),c.preventDefault(),m.emit("clickEv",a.props.args.ev??"")}},g(a.children,O))}return l===void 0?I("span",{},["$[",a.props.name," ",...g(a.children,O),"]"]):I("span",{style:"display: inline-block; "+l},g(a.children,O))}case"small":return[I("small",{style:"opacity: 0.7;"},g(a.children,O))];case"center":return[I("div",{style:"text-align:center;"},g(a.children,O))];case"url":return[a.props.url];case"link":return[g(a.children,O,!0)];case"mention":return[a.props.username];case"hashtag":return[`#${a.props.hashtag}`];case"blockCode":return[a.props.code];case"inlineCode":return[a.props.code];case"quote":return u.nowrap?[I("span",{style:W},g(a.children,O,!0))]:[I("div",{style:W},g(a.children,O,!0))];case"emojiCode":return[`:${a.props.name}:`];case"unicodeEmoji":return[a.props.emoji];case"mathInline":return[I("code",a.props.formula)];case"mathBlock":return[I("code",a.props.formula)];case"search":return[a.props.query];case"plain":return[I("span",g(a.children,O,!0))];default:return console.error("unrecognized ast type:",a.type),[]}}).flat(1/0);return I("span",{style:u.nowrap?"white-space: pre; word-wrap: normal; overflow: hidden; text-overflow: ellipsis;":"white-space: pre-wrap;"},g(E,u.rootScale??1))}const Ed={component:pd},C={render(u){return{components:{Mfm:pd},setup(){return{args:u}},computed:{props(){return{...this.args}}},template:'<Mfm v-bind="props" />'}},args:{text:"@ai *Hello*, #Miskist! ❤"},parameters:{layout:"centered"}},D={...C,args:{...C.args,plain:!0}},H={...C,args:{...C.args,nowrap:!0}},R={...C,args:{...C.args,isNote:!1}};var V,Z,x;C.parameters={...C.parameters,docs:{...(V=C.parameters)==null?void 0:V.docs,source:{originalSource:`{
  render(args) {
    return {
      components: {
        Mfm
      },
      setup() {
        return {
          args
        };
      },
      computed: {
        props() {
          return {
            ...this.args
          };
        }
      },
      template: '<Mfm v-bind="props" />'
    };
  },
  /*
    async play({ canvasElement, args }) {
        const canvas = within(canvasElement);
        if (args.plain) {
            const aiHelloMiskist = canvas.getByText('@ai *Hello*, #Miskist!');
            await expect(aiHelloMiskist).toBeInTheDocument();
        } else {
            const ai = canvas.getByText('@ai');
            await expect(ai).toBeInTheDocument();
            await expect(ai.closest('a')).toHaveAttribute('href', '/@ai');
            const hello = canvas.getByText('Hello');
            await expect(hello).toBeInTheDocument();
            await expect(hello.style.fontStyle).toBe('oblique');
            const miskist = canvas.getByText('#Miskist');
            await expect(miskist).toBeInTheDocument();
            await expect(miskist).toHaveAttribute('href', args.isNote ?? true ? '/tags/Miskist' : '/user-tags/Miskist');
        }
        const heart = canvas.getByAltText('❤');
        await expect(heart).toBeInTheDocument();
        await expect(heart).toHaveAttribute('src', '/twemoji/2764.svg');
    },*/
  args: {
    text: '@ai *Hello*, #Miskist! ❤'
  },
  parameters: {
    layout: 'centered'
  }
} satisfies StoryObj<typeof Mfm>`,...(x=(Z=C.parameters)==null?void 0:Z.docs)==null?void 0:x.source}}};var dd,ud,ed;D.parameters={...D.parameters,docs:{...(dd=D.parameters)==null?void 0:dd.docs,source:{originalSource:`{
  ...Default,
  args: {
    ...Default.args,
    plain: true
  }
} satisfies StoryObj<typeof Mfm>`,...(ed=(ud=D.parameters)==null?void 0:ud.docs)==null?void 0:ed.source}}};var fd,rd,cd;H.parameters={...H.parameters,docs:{...(fd=H.parameters)==null?void 0:fd.docs,source:{originalSource:`{
  ...Default,
  args: {
    ...Default.args,
    nowrap: true
  }
} satisfies StoryObj<typeof Mfm>`,...(cd=(rd=H.parameters)==null?void 0:rd.docs)==null?void 0:cd.source}}};var nd,td,ad;R.parameters={...R.parameters,docs:{...(nd=R.parameters)==null?void 0:nd.docs,source:{originalSource:`{
  ...Default,
  args: {
    ...Default.args,
    isNote: false
  }
} satisfies StoryObj<typeof Mfm>`,...(ad=(td=R.parameters)==null?void 0:td.docs)==null?void 0:ad.source}}};const Od=["Default","Plain","Nowrap","IsNotNote"];export{C as Default,R as IsNotNote,H as Nowrap,D as Plain,Od as __namedExportsOrder,Ed as default};

import{h as _}from"./vue.esm-bundler-hQKkb8Y4.js";import{c as q}from"./_commonjsHelpers-5-cIlDoe.js";var K={},A={},w={},S={},sd={};(function(u){Object.defineProperty(u,"__esModule",{value:!0}),u.createLanguage=u.lazy=u.lineEnd=u.lineBegin=u.char=u.newline=u.crlf=u.lf=u.cr=u.notMatch=u.alt=u.seq=u.regexp=u.str=u.Parser=u.failure=u.success=void 0;function m(n,a){return{success:!0,value:a,index:n}}u.success=m;function l(){return{success:!1}}u.failure=l;class g{constructor(a,o){this.handler=(e,f,r)=>{if(r.trace&&this.name!=null){const t=`${f}`;console.log(`${t.padEnd(6," ")}enter ${this.name}`);const b=a(e,f,r);if(b.success){const s=`${f}:${b.index}`;console.log(`${s.padEnd(6," ")}match ${this.name}`)}else{const s=`${f}`;console.log(`${s.padEnd(6," ")}fail ${this.name}`)}return b}return a(e,f,r)},this.name=o}map(a){return new g((o,e,f)=>{const r=this.handler(o,e,f);return r.success?m(r.index,a(r.value)):r})}text(){return new g((a,o,e)=>{const f=this.handler(a,o,e);if(!f.success)return f;const r=a.slice(o,f.index);return m(f.index,r)})}many(a){return new g((o,e,f)=>{let r,t=e;const b=[];for(;t<o.length&&(r=this.handler(o,t,f),!!r.success);)t=r.index,b.push(r.value);return b.length<a?l():m(t,b)})}sep(a,o){if(o<1)throw new Error('"min" must be a value greater than or equal to 1.');return h([this,h([a,this],1).many(o-1)]).map(e=>[e[0],...e[1]])}option(){return I([this,E(null)])}}u.Parser=g;function p(n){return new g((a,o,e)=>a.length-o<n.length||a.substr(o,n.length)!==n?l():m(o+n.length,n))}u.str=p;function d(n){const a=RegExp(`^(?:${n.source})`,n.flags);return new g((o,e,f)=>{const r=o.slice(e),t=a.exec(r);return t==null?l():m(e+t[0].length,t[0])})}u.regexp=d;function h(n,a){return new g((o,e,f)=>{let r,t=e;const b=[];for(let s=0;s<n.length;s++){if(r=n[s].handler(o,t,f),!r.success)return r;t=r.index,b.push(r.value)}return m(t,a!=null?b[a]:b)})}u.seq=h;function I(n){return new g((a,o,e)=>{let f;for(let r=0;r<n.length;r++)if(f=n[r].handler(a,o,e),f.success)return f;return l()})}u.alt=I;function E(n){return new g((a,o,e)=>m(o,n))}function v(n){return new g((a,o,e)=>n.handler(a,o,e).success?l():m(o,null))}u.notMatch=v,u.cr=p("\r"),u.lf=p(`
`),u.crlf=p(`\r
`),u.newline=I([u.crlf,u.cr,u.lf]),u.char=new g((n,a,o)=>{if(n.length-a<1)return l();const e=n.charAt(a);return m(a+1,e)}),u.lineBegin=new g((n,a,o)=>a===0||u.cr.handler(n,a-1,o).success||u.lf.handler(n,a-1,o).success?m(a,null):l()),u.lineEnd=new g((n,a,o)=>a===n.length||u.cr.handler(n,a,o).success||u.lf.handler(n,a,o).success?m(a,null):l());function c(n){const a=new g((o,e,f)=>(a.handler=n().handler,a.handler(o,e,f)));return a}u.lazy=c;function O(n){const a={};for(const o of Object.keys(n))a[o]=c(()=>{const e=n[o](a);if(e==null)throw new Error("syntax must return a parser.");return e.name=o,e});return a}u.createLanguage=O})(sd);var $={},z={};(function(u){Object.defineProperty(u,"__esModule",{value:!0}),u.TEXT=u.PLAIN=u.FN=u.LINK=u.N_URL=u.HASHTAG=u.MENTION=u.MATH_INLINE=u.INLINE_CODE=u.STRIKE=u.ITALIC=u.SMALL=u.BOLD=u.EMOJI_CODE=u.UNI_EMOJI=u.CENTER=u.MATH_BLOCK=u.CODE_BLOCK=u.SEARCH=u.QUOTE=u.isMfmBlock=void 0;const m=["quote","search","blockCode","mathBlock","center"];function l(i){return m.includes(i.type)}u.isMfmBlock=l;const g=i=>({type:"quote",children:i});u.QUOTE=g;const p=(i,N)=>({type:"search",props:{query:i,content:N}});u.SEARCH=p;const d=(i,N)=>({type:"blockCode",props:{code:i,lang:N}});u.CODE_BLOCK=d;const h=i=>({type:"mathBlock",props:{formula:i}});u.MATH_BLOCK=h;const I=i=>({type:"center",children:i});u.CENTER=I;const E=i=>({type:"unicodeEmoji",props:{emoji:i}});u.UNI_EMOJI=E;const v=i=>({type:"emojiCode",props:{name:i}});u.EMOJI_CODE=v;const c=i=>({type:"bold",children:i});u.BOLD=c;const O=i=>({type:"small",children:i});u.SMALL=O;const n=i=>({type:"italic",children:i});u.ITALIC=n;const a=i=>({type:"strike",children:i});u.STRIKE=a;const o=i=>({type:"inlineCode",props:{code:i}});u.INLINE_CODE=o;const e=i=>({type:"mathInline",props:{formula:i}});u.MATH_INLINE=e;const f=(i,N,L)=>({type:"mention",props:{username:i,host:N,acct:L}});u.MENTION=f;const r=i=>({type:"hashtag",props:{hashtag:i}});u.HASHTAG=r;const t=(i,N)=>{const L={type:"url",props:{url:i}};return N&&(L.props.brackets=N),L};u.N_URL=t;const b=(i,N,L)=>({type:"link",props:{silent:i,url:N},children:L});u.LINK=b;const s=(i,N,L)=>({type:"fn",props:{name:i,args:N},children:L});u.FN=s;const y=i=>({type:"plain",children:[(0,u.TEXT)(i)]});u.PLAIN=y;const T=i=>({type:"text",props:{text:i}});u.TEXT=T})(z);Object.defineProperty($,"__esModule",{value:!0});$.inspectOne=$.stringifyTree=$.stringifyNode=$.mergeText=void 0;const U=z;function bd(u){const m=[],l=[];function g(){l.length>0&&(m.push((0,U.TEXT)(l.join(""))),l.length=0)}const p=u.flat(1);for(const d of p)typeof d=="string"?l.push(d):!Array.isArray(d)&&d.type==="text"?l.push(d.props.text):(g(),m.push(d));return g(),m}$.mergeText=bd;function id(u){var m;switch(u.type){case"quote":return j(u.children).split(`
`).map(l=>`> ${l}`).join(`
`);case"search":return u.props.content;case"blockCode":return`\`\`\`${(m=u.props.lang)!==null&&m!==void 0?m:""}
${u.props.code}
\`\`\``;case"mathBlock":return`\\[
${u.props.formula}
\\]`;case"center":return`<center>
${j(u.children)}
</center>`;case"emojiCode":return`:${u.props.name}:`;case"unicodeEmoji":return u.props.emoji;case"bold":return`**${j(u.children)}**`;case"small":return`<small>${j(u.children)}</small>`;case"italic":return`<i>${j(u.children)}</i>`;case"strike":return`~~${j(u.children)}~~`;case"inlineCode":return`\`${u.props.code}\``;case"mathInline":return`\\(${u.props.formula}\\)`;case"mention":return u.props.acct;case"hashtag":return`#${u.props.hashtag}`;case"url":return u.props.brackets?`<${u.props.url}>`:u.props.url;case"link":return`${u.props.silent?"?":""}[${j(u.children)}](${u.props.url})`;case"fn":{const l=Object.keys(u.props.args).map(p=>{const d=u.props.args[p];return d===!0?p:`${p}=${d}`}),g=l.length>0?"."+l.join(","):"";return`$[${u.props.name}${g} ${j(u.children)}]`}case"plain":return`<plain>
${j(u.children)}
</plain>`;case"text":return u.props.text}throw new Error("unknown mfm node")}$.stringifyNode=id;var P;(function(u){u[u.none=0]="none",u[u.inline=1]="inline",u[u.block=2]="block"})(P||(P={}));function j(u){const m=[];let l=P.none;for(const g of u){let p=!0;(0,U.isMfmBlock)(g)?(l===P.none&&(p=!1),l=P.block):((l===P.none||l===P.inline)&&(p=!1),l=P.inline),p&&m.push((0,U.TEXT)(`
`)),m.push(g)}return m.map(g=>id(g)).join("")}$.stringifyTree=j;function ld(u,m){if(m(u),u.children!=null)for(const l of u.children)ld(l,m)}$.inspectOne=ld;var F={};Object.defineProperty(F,"__esModule",{value:!0});F.default=/(?:\ud83d\udc68\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83e\uddd1\ud83c[\udffc-\udfff]|\ud83e\uddd1\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83e\uddd1\ud83c[\udffb\udffd-\udfff]|\ud83e\uddd1\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83e\uddd1\ud83c[\udffb\udffc\udffe\udfff]|\ud83e\uddd1\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83e\uddd1\ud83c[\udffb-\udffd\udfff]|\ud83e\uddd1\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83e\uddd1\ud83c[\udffb-\udffe]|\ud83d\udc68\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffc-\udfff]|\ud83d\udc68\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffd-\udfff]|\ud83d\udc68\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffc\udffe\udfff]|\ud83d\udc68\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffd\udfff]|\ud83d\udc68\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffe]|\ud83d\udc69\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffc-\udfff]|\ud83d\udc69\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffc-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffd-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb\udffd-\udfff]|\ud83d\udc69\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffc\udffe\udfff]|\ud83d\udc69\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb\udffc\udffe\udfff]|\ud83d\udc69\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffd\udfff]|\ud83d\udc69\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb-\udffd\udfff]|\ud83d\udc69\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffe]|\ud83d\udc69\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb-\udffe]|\ud83e\uddd1\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83e\uddd1\ud83c[\udffc-\udfff]|\ud83e\uddd1\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83e\uddd1\ud83c[\udffb\udffd-\udfff]|\ud83e\uddd1\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83e\uddd1\ud83c[\udffb\udffc\udffe\udfff]|\ud83e\uddd1\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83e\uddd1\ud83c[\udffb-\udffd\udfff]|\ud83e\uddd1\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83e\uddd1\ud83c[\udffb-\udffe]|\ud83e\uddd1\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83d\udc68\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68|\ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d[\udc68\udc69]|\ud83e\udef1\ud83c\udffb\u200d\ud83e\udef2\ud83c[\udffc-\udfff]|\ud83e\udef1\ud83c\udffc\u200d\ud83e\udef2\ud83c[\udffb\udffd-\udfff]|\ud83e\udef1\ud83c\udffd\u200d\ud83e\udef2\ud83c[\udffb\udffc\udffe\udfff]|\ud83e\udef1\ud83c\udffe\u200d\ud83e\udef2\ud83c[\udffb-\udffd\udfff]|\ud83e\udef1\ud83c\udfff\u200d\ud83e\udef2\ud83c[\udffb-\udffe]|\ud83d\udc68\u200d\u2764\ufe0f\u200d\ud83d\udc68|\ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d[\udc68\udc69]|\ud83e\uddd1\u200d\ud83e\udd1d\u200d\ud83e\uddd1|\ud83d\udc6b\ud83c[\udffb-\udfff]|\ud83d\udc6c\ud83c[\udffb-\udfff]|\ud83d\udc6d\ud83c[\udffb-\udfff]|\ud83d\udc8f\ud83c[\udffb-\udfff]|\ud83d\udc91\ud83c[\udffb-\udfff]|\ud83e\udd1d\ud83c[\udffb-\udfff]|\ud83d[\udc6b-\udc6d\udc8f\udc91]|\ud83e\udd1d)|(?:\ud83d[\udc68\udc69]|\ud83e\uddd1)(?:\ud83c[\udffb-\udfff])?\u200d(?:\u2695\ufe0f|\u2696\ufe0f|\u2708\ufe0f|\ud83c[\udf3e\udf73\udf7c\udf84\udf93\udfa4\udfa8\udfeb\udfed]|\ud83d[\udcbb\udcbc\udd27\udd2c\ude80\ude92]|\ud83e[\uddaf-\uddb3\uddbc\uddbd])|(?:\ud83c[\udfcb\udfcc]|\ud83d[\udd74\udd75]|\u26f9)((?:\ud83c[\udffb-\udfff]|\ufe0f)\u200d[\u2640\u2642]\ufe0f)|(?:\ud83c[\udfc3\udfc4\udfca]|\ud83d[\udc6e\udc70\udc71\udc73\udc77\udc81\udc82\udc86\udc87\ude45-\ude47\ude4b\ude4d\ude4e\udea3\udeb4-\udeb6]|\ud83e[\udd26\udd35\udd37-\udd39\udd3d\udd3e\uddb8\uddb9\uddcd-\uddcf\uddd4\uddd6-\udddd])(?:\ud83c[\udffb-\udfff])?\u200d[\u2640\u2642]\ufe0f|(?:\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83c\udff3\ufe0f\u200d\u26a7\ufe0f|\ud83c\udff3\ufe0f\u200d\ud83c\udf08|\ud83d\ude36\u200d\ud83c\udf2b\ufe0f|\u2764\ufe0f\u200d\ud83d\udd25|\u2764\ufe0f\u200d\ud83e\ude79|\ud83c\udff4\u200d\u2620\ufe0f|\ud83d\udc15\u200d\ud83e\uddba|\ud83d\udc3b\u200d\u2744\ufe0f|\ud83d\udc41\u200d\ud83d\udde8|\ud83d\udc68\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83d\udc6f\u200d\u2640\ufe0f|\ud83d\udc6f\u200d\u2642\ufe0f|\ud83d\ude2e\u200d\ud83d\udca8|\ud83d\ude35\u200d\ud83d\udcab|\ud83e\udd3c\u200d\u2640\ufe0f|\ud83e\udd3c\u200d\u2642\ufe0f|\ud83e\uddde\u200d\u2640\ufe0f|\ud83e\uddde\u200d\u2642\ufe0f|\ud83e\udddf\u200d\u2640\ufe0f|\ud83e\udddf\u200d\u2642\ufe0f|\ud83d\udc08\u200d\u2b1b|\ud83d\udc26\u200d\u2b1b)|[#*0-9]\ufe0f?\u20e3|(?:[©®\u2122\u265f]\ufe0f)|(?:\ud83c[\udc04\udd70\udd71\udd7e\udd7f\ude02\ude1a\ude2f\ude37\udf21\udf24-\udf2c\udf36\udf7d\udf96\udf97\udf99-\udf9b\udf9e\udf9f\udfcd\udfce\udfd4-\udfdf\udff3\udff5\udff7]|\ud83d[\udc3f\udc41\udcfd\udd49\udd4a\udd6f\udd70\udd73\udd76-\udd79\udd87\udd8a-\udd8d\udda5\udda8\uddb1\uddb2\uddbc\uddc2-\uddc4\uddd1-\uddd3\udddc-\uddde\udde1\udde3\udde8\uddef\uddf3\uddfa\udecb\udecd-\udecf\udee0-\udee5\udee9\udef0\udef3]|[\u203c\u2049\u2139\u2194-\u2199\u21a9\u21aa\u231a\u231b\u2328\u23cf\u23ed-\u23ef\u23f1\u23f2\u23f8-\u23fa\u24c2\u25aa\u25ab\u25b6\u25c0\u25fb-\u25fe\u2600-\u2604\u260e\u2611\u2614\u2615\u2618\u2620\u2622\u2623\u2626\u262a\u262e\u262f\u2638-\u263a\u2640\u2642\u2648-\u2653\u2660\u2663\u2665\u2666\u2668\u267b\u267f\u2692-\u2697\u2699\u269b\u269c\u26a0\u26a1\u26a7\u26aa\u26ab\u26b0\u26b1\u26bd\u26be\u26c4\u26c5\u26c8\u26cf\u26d1\u26d3\u26d4\u26e9\u26ea\u26f0-\u26f5\u26f8\u26fa\u26fd\u2702\u2708\u2709\u270f\u2712\u2714\u2716\u271d\u2721\u2733\u2734\u2744\u2747\u2757\u2763\u2764\u27a1\u2934\u2935\u2b05-\u2b07\u2b1b\u2b1c\u2b50\u2b55\u3030\u303d\u3297\u3299])(?:\ufe0f|(?!\ufe0e))|(?:(?:\ud83c[\udfcb\udfcc]|\ud83d[\udd74\udd75\udd90]|\ud83e\udef0|[\u261d\u26f7\u26f9\u270c\u270d])(?:\ufe0f|(?!\ufe0e))|(?:\ud83c[\udf85\udfc2-\udfc4\udfc7\udfca]|\ud83d[\udc42\udc43\udc46-\udc50\udc66-\udc69\udc6e\udc70-\udc78\udc7c\udc81-\udc83\udc85-\udc87\udcaa\udd7a\udd95\udd96\ude45-\ude47\ude4b-\ude4f\udea3\udeb4-\udeb6\udec0\udecc]|\ud83e[\udd0c\udd0f\udd18-\udd1c\udd1e\udd1f\udd26\udd30-\udd39\udd3d\udd3e\udd77\uddb5\uddb6\uddb8\uddb9\uddbb\uddcd-\uddcf\uddd1-\udddd\udec3-\udec5\udef1-\udef8]|[\u270a\u270b]))(?:\ud83c[\udffb-\udfff])?|(?:\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc65\udb40\udc6e\udb40\udc67\udb40\udc7f|\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc73\udb40\udc63\udb40\udc74\udb40\udc7f|\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc77\udb40\udc6c\udb40\udc73\udb40\udc7f|\ud83c\udde6\ud83c[\udde8-\uddec\uddee\uddf1\uddf2\uddf4\uddf6-\uddfa\uddfc\uddfd\uddff]|\ud83c\udde7\ud83c[\udde6\udde7\udde9-\uddef\uddf1-\uddf4\uddf6-\uddf9\uddfb\uddfc\uddfe\uddff]|\ud83c\udde8\ud83c[\udde6\udde8\udde9\uddeb-\uddee\uddf0-\uddf5\uddf7\uddfa-\uddff]|\ud83c\udde9\ud83c[\uddea\uddec\uddef\uddf0\uddf2\uddf4\uddff]|\ud83c\uddea\ud83c[\udde6\udde8\uddea\uddec\udded\uddf7-\uddfa]|\ud83c\uddeb\ud83c[\uddee-\uddf0\uddf2\uddf4\uddf7]|\ud83c\uddec\ud83c[\udde6\udde7\udde9-\uddee\uddf1-\uddf3\uddf5-\uddfa\uddfc\uddfe]|\ud83c\udded\ud83c[\uddf0\uddf2\uddf3\uddf7\uddf9\uddfa]|\ud83c\uddee\ud83c[\udde8-\uddea\uddf1-\uddf4\uddf6-\uddf9]|\ud83c\uddef\ud83c[\uddea\uddf2\uddf4\uddf5]|\ud83c\uddf0\ud83c[\uddea\uddec-\uddee\uddf2\uddf3\uddf5\uddf7\uddfc\uddfe\uddff]|\ud83c\uddf1\ud83c[\udde6-\udde8\uddee\uddf0\uddf7-\uddfb\uddfe]|\ud83c\uddf2\ud83c[\udde6\udde8-\udded\uddf0-\uddff]|\ud83c\uddf3\ud83c[\udde6\udde8\uddea-\uddec\uddee\uddf1\uddf4\uddf5\uddf7\uddfa\uddff]|\ud83c\uddf4\ud83c\uddf2|\ud83c\uddf5\ud83c[\udde6\uddea-\udded\uddf0-\uddf3\uddf7-\uddf9\uddfc\uddfe]|\ud83c\uddf6\ud83c\udde6|\ud83c\uddf7\ud83c[\uddea\uddf4\uddf8\uddfa\uddfc]|\ud83c\uddf8\ud83c[\udde6-\uddea\uddec-\uddf4\uddf7-\uddf9\uddfb\uddfd-\uddff]|\ud83c\uddf9\ud83c[\udde6\udde8\udde9\uddeb-\udded\uddef-\uddf4\uddf7\uddf9\uddfb\uddfc\uddff]|\ud83c\uddfa\ud83c[\udde6\uddec\uddf2\uddf3\uddf8\uddfe\uddff]|\ud83c\uddfb\ud83c[\udde6\udde8\uddea\uddec\uddee\uddf3\uddfa]|\ud83c\uddfc\ud83c[\uddeb\uddf8]|\ud83c\uddfd\ud83c\uddf0|\ud83c\uddfe\ud83c[\uddea\uddf9]|\ud83c\uddff\ud83c[\udde6\uddf2\uddfc]|\ud83c[\udccf\udd8e\udd91-\udd9a\udde6-\uddff\ude01\ude32-\ude36\ude38-\ude3a\ude50\ude51\udf00-\udf20\udf2d-\udf35\udf37-\udf7c\udf7e-\udf84\udf86-\udf93\udfa0-\udfc1\udfc5\udfc6\udfc8\udfc9\udfcf-\udfd3\udfe0-\udff0\udff4\udff8-\udfff]|\ud83d[\udc00-\udc3e\udc40\udc44\udc45\udc51-\udc65\udc6a\udc6f\udc79-\udc7b\udc7d-\udc80\udc84\udc88-\udc8e\udc90\udc92-\udca9\udcab-\udcfc\udcff-\udd3d\udd4b-\udd4e\udd50-\udd67\udda4\uddfb-\ude44\ude48-\ude4a\ude80-\udea2\udea4-\udeb3\udeb7-\udebf\udec1-\udec5\uded0-\uded2\uded5-\uded7\udedc-\udedf\udeeb\udeec\udef4-\udefc\udfe0-\udfeb\udff0]|\ud83e[\udd0d\udd0e\udd10-\udd17\udd20-\udd25\udd27-\udd2f\udd3a\udd3c\udd3f-\udd45\udd47-\udd76\udd78-\uddb4\uddb7\uddba\uddbc-\uddcc\uddd0\uddde-\uddff\ude70-\ude7c\ude80-\ude88\ude90-\udebd\udebf-\udec2\udece-\udedb\udee0-\udee8]|[\u23e9-\u23ec\u23f0\u23f3\u267e\u26ce\u2705\u2728\u274c\u274e\u2753-\u2755\u2795-\u2797\u27b0\u27bf\ue50a])|\ufe0f/g;var X;function md(){if(X)return S;X=1;var u=q&&q.__createBinding||(Object.create?function(e,f,r,t){t===void 0&&(t=r);var b=Object.getOwnPropertyDescriptor(f,r);(!b||("get"in b?!f.__esModule:b.writable||b.configurable))&&(b={enumerable:!0,get:function(){return f[r]}}),Object.defineProperty(e,t,b)}:function(e,f,r,t){t===void 0&&(t=r),e[t]=f[r]}),m=q&&q.__setModuleDefault||(Object.create?function(e,f){Object.defineProperty(e,"default",{enumerable:!0,value:f})}:function(e,f){e.default=f}),l=q&&q.__importStar||function(e){if(e&&e.__esModule)return e;var f={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&u(f,e,r);return m(f,e),f},g=q&&q.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(S,"__esModule",{value:!0}),S.language=void 0;const p=l(od()),d=l(sd),h=$,I=g(F),E=d.regexp(/[\u0020\u3000\t]/),v=d.regexp(/[a-z0-9]/i),c=d.alt([d.crlf,d.cr,d.lf]);function O(e){return new d.Parser((f,r,t)=>{const b=[];let s=r;for(let y=0;y<e.length;y++){const T=e[y].handler(f,s,t);if(!T.success)return s===r?d.failure():d.success(s,f.slice(r,s));b.push(T.value),s=T.index}return d.success(s,b)})}const n=new d.Parser((e,f,r)=>r.linkLabel?d.failure():d.success(f,null)),a=new d.Parser((e,f,r)=>r.depth<r.nestLimit?d.success(f,null):d.failure());function o(e,f){const r=d.alt([d.seq([a,e],1),f??d.char]);return new d.Parser((t,b,s)=>{s.depth++;const y=r.handler(t,b,s);return s.depth--,y})}return S.language=d.createLanguage({fullParser:e=>e.full.many(0),simpleParser:e=>e.simple.many(0),full:e=>d.alt([e.unicodeEmoji,e.centerTag,e.smallTag,e.plainTag,e.boldTag,e.italicTag,e.strikeTag,e.urlAlt,e.big,e.boldAsta,e.italicAsta,e.boldUnder,e.italicUnder,e.codeBlock,e.inlineCode,e.quote,e.mathBlock,e.mathInline,e.strikeWave,e.fn,e.mention,e.hashtag,e.emojiCode,e.link,e.url,e.search,e.text]),simple:e=>d.alt([e.unicodeEmoji,e.emojiCode,e.text]),inline:e=>d.alt([e.unicodeEmoji,e.smallTag,e.plainTag,e.boldTag,e.italicTag,e.strikeTag,e.urlAlt,e.big,e.boldAsta,e.italicAsta,e.boldUnder,e.italicUnder,e.inlineCode,e.mathInline,e.strikeWave,e.fn,e.mention,e.hashtag,e.emojiCode,e.link,e.url,e.text]),quote:e=>{const f=d.seq([d.str(">"),E.option(),d.seq([d.notMatch(c),d.char],1).many(0).text()],2).sep(c,1),r=d.seq([c.option(),c.option(),d.lineBegin,f,c.option(),c.option()],3);return new d.Parser((t,b,s)=>{let y;if(y=r.handler(t,b,s),!y.success)return y;const T=y.value,i=y.index;return T.length===1&&T[0].length===0?d.failure():(y=o(e.fullParser).many(0).handler(T.join(`
`),0,s),y.success?d.success(i,p.QUOTE((0,h.mergeText)(y.value))):y)})},codeBlock:e=>{const f=d.str("```");return d.seq([c.option(),d.lineBegin,f,d.seq([d.notMatch(c),d.char],1).many(0),c,d.seq([d.notMatch(d.seq([c,f,d.lineEnd])),d.char],1).many(1),c,f,d.lineEnd,c.option()]).map(r=>{const t=r[3].join("").trim(),b=r[5].join("");return p.CODE_BLOCK(b,t.length>0?t:null)})},mathBlock:e=>{const f=d.str("\\["),r=d.str("\\]");return d.seq([c.option(),d.lineBegin,f,c.option(),d.seq([d.notMatch(d.seq([c.option(),r])),d.char],1).many(1),c.option(),r,d.lineEnd,c.option()]).map(t=>{const b=t[4].join("");return p.MATH_BLOCK(b)})},centerTag:e=>{const f=d.str("<center>"),r=d.str("</center>");return d.seq([c.option(),d.lineBegin,f,c.option(),d.seq([d.notMatch(d.seq([c.option(),r])),o(e.inline)],1).many(1),c.option(),r,d.lineEnd,c.option()]).map(t=>p.CENTER((0,h.mergeText)(t[4])))},big:e=>{const f=d.str("***");return O([f,d.seq([d.notMatch(f),o(e.inline)],1).many(1),f]).map(r=>typeof r=="string"?r:p.FN("tada",{},(0,h.mergeText)(r[1])))},boldAsta:e=>{const f=d.str("**");return O([f,d.seq([d.notMatch(f),o(e.inline)],1).many(1),f]).map(r=>typeof r=="string"?r:p.BOLD((0,h.mergeText)(r[1])))},boldTag:e=>{const f=d.str("<b>"),r=d.str("</b>");return O([f,d.seq([d.notMatch(r),o(e.inline)],1).many(1),r]).map(t=>typeof t=="string"?t:p.BOLD((0,h.mergeText)(t[1])))},boldUnder:e=>{const f=d.str("__");return d.seq([f,d.alt([v,E]).many(1),f]).map(r=>p.BOLD((0,h.mergeText)(r[1])))},smallTag:e=>{const f=d.str("<small>"),r=d.str("</small>");return O([f,d.seq([d.notMatch(r),o(e.inline)],1).many(1),r]).map(t=>typeof t=="string"?t:p.SMALL((0,h.mergeText)(t[1])))},italicTag:e=>{const f=d.str("<i>"),r=d.str("</i>");return O([f,d.seq([d.notMatch(r),o(e.inline)],1).many(1),r]).map(t=>typeof t=="string"?t:p.ITALIC((0,h.mergeText)(t[1])))},italicAsta:e=>{const f=d.str("*"),r=d.seq([f,d.alt([v,E]).many(1),f]);return new d.Parser((t,b,s)=>{const y=r.handler(t,b,s);if(!y.success)return d.failure();const T=t.slice(0,b);return/[a-z0-9]$/i.test(T)?d.failure():d.success(y.index,p.ITALIC((0,h.mergeText)(y.value[1])))})},italicUnder:e=>{const f=d.str("_"),r=d.seq([f,d.alt([v,E]).many(1),f]);return new d.Parser((t,b,s)=>{const y=r.handler(t,b,s);if(!y.success)return d.failure();const T=t.slice(0,b);return/[a-z0-9]$/i.test(T)?d.failure():d.success(y.index,p.ITALIC((0,h.mergeText)(y.value[1])))})},strikeTag:e=>{const f=d.str("<s>"),r=d.str("</s>");return O([f,d.seq([d.notMatch(r),o(e.inline)],1).many(1),r]).map(t=>typeof t=="string"?t:p.STRIKE((0,h.mergeText)(t[1])))},strikeWave:e=>{const f=d.str("~~");return O([f,d.seq([d.notMatch(d.alt([f,c])),o(e.inline)],1).many(1),f]).map(r=>typeof r=="string"?r:p.STRIKE((0,h.mergeText)(r[1])))},unicodeEmoji:e=>{const f=RegExp(I.default.source);return d.regexp(f).map(r=>p.UNI_EMOJI(r))},plainTag:e=>{const f=d.str("<plain>"),r=d.str("</plain>");return d.seq([f,c.option(),d.seq([d.notMatch(d.seq([c.option(),r])),d.char],1).many(1).text(),c.option(),r],2).map(t=>p.PLAIN(t))},fn:e=>{const f=new d.Parser((s,y,T)=>{const i=d.regexp(/[a-z0-9_]+/i).handler(s,y,T);return i.success?d.success(i.index,i.value):i}),r=d.seq([d.regexp(/[a-z0-9_]+/i),d.seq([d.str("="),d.regexp(/[a-z0-9_.-]+/i)],1).option()]).map(s=>({k:s[0],v:s[1]!=null?s[1]:!0})),t=d.seq([d.str("."),r.sep(d.str(","),1)],1).map(s=>{const y={};for(const T of s)y[T.k]=T.v;return y}),b=d.str("]");return O([d.str("$["),f,t.option(),d.str(" "),d.seq([d.notMatch(b),o(e.inline)],1).many(1),b]).map(s=>{if(typeof s=="string")return s;const y=s[1],T=s[2]||{},i=s[4];return p.FN(y,T,(0,h.mergeText)(i))})},inlineCode:e=>{const f=d.str("`");return d.seq([f,d.seq([d.notMatch(d.alt([f,d.str("´"),c])),d.char],1).many(1),f]).map(r=>p.INLINE_CODE(r[1].join("")))},mathInline:e=>{const f=d.str("\\("),r=d.str("\\)");return d.seq([f,d.seq([d.notMatch(d.alt([r,c])),d.char],1).many(1),r]).map(t=>p.MATH_INLINE(t[1].join("")))},mention:e=>{const f=d.seq([n,d.str("@"),d.regexp(/[a-z0-9_-]+/i),d.seq([d.str("@"),d.regexp(/[a-z0-9_.-]+/i)],1).option()]);return new d.Parser((r,t,b)=>{let s;if(s=f.handler(r,t,b),!s.success)return d.failure();const y=r.slice(0,t);if(/[a-z0-9]$/i.test(y))return d.failure();let T=!1;const i=s.index,N=s.value[2],L=s.value[3];let M=L;L!=null&&(s=/[.-]+$/.exec(L),s!=null&&(M=L.slice(0,-1*s[0].length),M.length===0&&(T=!0,M=null)));let B=N;if(s=/-+$/.exec(N),s!=null&&(M==null?B=N.slice(0,-1*s[0].length):T=!0),(B.length===0||B[0]==="-")&&(T=!0),M!=null&&/^[.-]/.test(M)&&(T=!0),T)return d.success(i,r.slice(t,i));const J=M!=null?`@${B}@${M}`:`@${B}`;return d.success(t+J.length,p.MENTION(B,M,J))})},hashtag:e=>{const f=d.str("#"),r=d.seq([d.notMatch(d.alt([d.regexp(/[ \u3000\t.,!?'"#:/[\]【】()「」（）<>]/),E,c])),d.char],1),t=d.lazy(()=>d.alt([d.seq([d.str("("),o(t,r).many(0),d.str(")")]),d.seq([d.str("["),o(t,r).many(0),d.str("]")]),d.seq([d.str("「"),o(t,r).many(0),d.str("」")]),d.seq([d.str("（"),o(t,r).many(0),d.str("）")]),r])),b=d.seq([n,f,t.many(1).text()],2);return new d.Parser((s,y,T)=>{const i=b.handler(s,y,T);if(!i.success)return d.failure();const N=s.slice(0,y);if(/[a-z0-9]$/i.test(N))return d.failure();const L=i.index,M=i.value;return/^[0-9]+$/.test(M)?d.failure():d.success(L,p.HASHTAG(M))})},emojiCode:e=>{const f=d.notMatch(d.regexp(/[a-z0-9]/i)),r=d.str(":");return d.seq([d.alt([d.lineBegin,f]),r,d.regexp(/[a-z0-9_+-]+/i),r,d.alt([d.lineEnd,f])],2).map(t=>p.EMOJI_CODE(t))},link:e=>{const f=new d.Parser((t,b,s)=>{s.linkLabel=!0;const y=e.inline.handler(t,b,s);return s.linkLabel=!1,y}),r=d.str("]");return d.seq([n,d.alt([d.str("?["),d.str("[")]),d.seq([d.notMatch(d.alt([r,c])),o(f)],1).many(1),r,d.str("("),d.alt([e.urlAlt,e.url]),d.str(")")]).map(t=>{const b=t[1]==="?[",s=t[2],y=t[5];return p.LINK(b,y.props.url,(0,h.mergeText)(s))})},url:e=>{const f=d.regexp(/[.,a-z0-9_/:%#@$&?!~=+-]/i),r=d.lazy(()=>d.alt([d.seq([d.str("("),o(r,f).many(0),d.str(")")]),d.seq([d.str("["),o(r,f).many(0),d.str("]")]),f])),t=d.seq([n,d.regexp(/https?:\/\//),r.many(1).text()]);return new d.Parser((b,s,y)=>{let T;if(T=t.handler(b,s,y),!T.success)return d.failure();const i=T.index;let N=i;const L=T.value[1];let M=T.value[2];return T=/[.,]+$/.exec(M),T!=null&&(N-=T[0].length,M=M.slice(0,-1*T[0].length),M.length===0)?d.success(i,b.slice(s,i)):d.success(N,p.N_URL(L+M,!1))})},urlAlt:e=>{const f=d.str("<"),r=d.str(">"),t=d.seq([n,f,d.regexp(/https?:\/\//),d.seq([d.notMatch(d.alt([r,E])),d.char],1).many(1),r]).text();return new d.Parser((b,s,y)=>{const T=t.handler(b,s,y);if(!T.success)return d.failure();const i=T.value.slice(1,T.value.length-1);return d.success(T.index,p.N_URL(i,!0))})},search:e=>{const f=d.alt([d.regexp(/\[(検索|search)\]/i),d.regexp(/(検索|search)/i)]);return d.seq([c.option(),d.lineBegin,d.seq([d.notMatch(d.alt([c,d.seq([E,f,d.lineEnd])])),d.char],1).many(1),E,f,d.lineEnd,c.option()]).map(r=>{const t=r[2].join("");return p.SEARCH(t,`${t}${r[3]}${r[4]}`)})},text:e=>d.char}),S}var k;function gd(){if(k)return w;k=1,Object.defineProperty(w,"__esModule",{value:!0}),w.simpleParser=w.fullParser=void 0;const u=md(),m=$;function l(p,d){const h=u.language.fullParser.handler(p,0,{nestLimit:d.nestLimit!=null?d.nestLimit:20,depth:0,linkLabel:!1,trace:!1});return(0,m.mergeText)(h.value)}w.fullParser=l;function g(p){const d=u.language.simpleParser.handler(p,0,{});return(0,m.mergeText)(d.value)}return w.simpleParser=g,w}var G;function hd(){if(G)return A;G=1,Object.defineProperty(A,"__esModule",{value:!0}),A.extract=A.inspect=A.toString=A.parseSimple=A.parse=void 0;const u=gd(),m=$;function l(I,E={}){return(0,u.fullParser)(I,{nestLimit:E.nestLimit})}A.parse=l;function g(I){return(0,u.simpleParser)(I)}A.parseSimple=g;function p(I){return Array.isArray(I)?(0,m.stringifyTree)(I):(0,m.stringifyNode)(I)}A.toString=p;function d(I,E){if(Array.isArray(I))for(const v of I)(0,m.inspectOne)(v,E);else(0,m.inspectOne)(I,E)}A.inspect=d;function h(I,E){const v=[];return d(I,c=>{E(c)&&v.push(c)}),v}return A.extract=h,A}var Q;function od(){return Q||(Q=1,function(u){Object.defineProperty(u,"__esModule",{value:!0}),u.TEXT=u.PLAIN=u.FN=u.LINK=u.N_URL=u.HASHTAG=u.MENTION=u.MATH_INLINE=u.INLINE_CODE=u.STRIKE=u.ITALIC=u.SMALL=u.BOLD=u.EMOJI_CODE=u.UNI_EMOJI=u.CENTER=u.MATH_BLOCK=u.CODE_BLOCK=u.SEARCH=u.QUOTE=u.extract=u.inspect=u.toString=u.parseSimple=u.parse=void 0;var m=hd();Object.defineProperty(u,"parse",{enumerable:!0,get:function(){return m.parse}}),Object.defineProperty(u,"parseSimple",{enumerable:!0,get:function(){return m.parseSimple}}),Object.defineProperty(u,"toString",{enumerable:!0,get:function(){return m.toString}}),Object.defineProperty(u,"inspect",{enumerable:!0,get:function(){return m.inspect}}),Object.defineProperty(u,"extract",{enumerable:!0,get:function(){return m.extract}});var l=z;Object.defineProperty(u,"QUOTE",{enumerable:!0,get:function(){return l.QUOTE}}),Object.defineProperty(u,"SEARCH",{enumerable:!0,get:function(){return l.SEARCH}}),Object.defineProperty(u,"CODE_BLOCK",{enumerable:!0,get:function(){return l.CODE_BLOCK}}),Object.defineProperty(u,"MATH_BLOCK",{enumerable:!0,get:function(){return l.MATH_BLOCK}}),Object.defineProperty(u,"CENTER",{enumerable:!0,get:function(){return l.CENTER}}),Object.defineProperty(u,"UNI_EMOJI",{enumerable:!0,get:function(){return l.UNI_EMOJI}}),Object.defineProperty(u,"EMOJI_CODE",{enumerable:!0,get:function(){return l.EMOJI_CODE}}),Object.defineProperty(u,"BOLD",{enumerable:!0,get:function(){return l.BOLD}}),Object.defineProperty(u,"SMALL",{enumerable:!0,get:function(){return l.SMALL}}),Object.defineProperty(u,"ITALIC",{enumerable:!0,get:function(){return l.ITALIC}}),Object.defineProperty(u,"STRIKE",{enumerable:!0,get:function(){return l.STRIKE}}),Object.defineProperty(u,"INLINE_CODE",{enumerable:!0,get:function(){return l.INLINE_CODE}}),Object.defineProperty(u,"MATH_INLINE",{enumerable:!0,get:function(){return l.MATH_INLINE}}),Object.defineProperty(u,"MENTION",{enumerable:!0,get:function(){return l.MENTION}}),Object.defineProperty(u,"HASHTAG",{enumerable:!0,get:function(){return l.HASHTAG}}),Object.defineProperty(u,"N_URL",{enumerable:!0,get:function(){return l.N_URL}}),Object.defineProperty(u,"LINK",{enumerable:!0,get:function(){return l.LINK}}),Object.defineProperty(u,"FN",{enumerable:!0,get:function(){return l.FN}}),Object.defineProperty(u,"PLAIN",{enumerable:!0,get:function(){return l.PLAIN}}),Object.defineProperty(u,"TEXT",{enumerable:!0,get:function(){return l.TEXT}})}(K)),K}var Y=od();const W=`
display: block;
margin: 8px;
padding: 6px 0 6px 12px;
color: var(--fg);
border-left: solid 3px var(--fg);
opacity: 0.7;
`.split(`
`).join(" ");function pd(u,m){if(u.isNote,u.text==null||u.text==="")return;const l=u.parsedNodes??(u.plain?Y.parseSimple:Y.parse)(u.text),g=I=>typeof I!="string"?null:I.match(/^[0-9.]+s$/)?I:null,p=I=>typeof I=="string"?I:null,d=!!u.useAnim,h=(I,E,v=!1)=>I.map(c=>{switch(c.type){case"text":{let O=c.props.text.replace(/(\r\n|\n|\r)/g,`
`);if(u.plain)return[O.replace(/\n/g," ")];{const n=[];for(const a of O.split(`
`))n.push(_("br")),n.push(a);return n.shift(),n}}case"bold":return[_("b",h(c.children,E))];case"strike":return[_("del",h(c.children,E))];case"italic":return _("i",{style:"font-style: oblique;"},h(c.children,E));case"fn":{let O;switch(c.props.name){case"tada":{const n=g(c.props.args.speed)??"1s",a=g(c.props.args.delay)??"0s";O="font-size: 150%;"+(d?`animation: tada ${n} linear infinite both; animation-delay: ${a};`:"");break}case"jelly":{const n=g(c.props.args.speed)??"1s",a=g(c.props.args.delay)??"0s";O=d?`animation: mfm-rubberBand ${n} linear infinite both; animation-delay: ${a};`:"";break}case"twitch":{const n=g(c.props.args.speed)??"0.5s",a=g(c.props.args.delay)??"0s";O=d?`animation: mfm-twitch ${n} ease infinite; animation-delay: ${a};`:"";break}case"shake":{const n=g(c.props.args.speed)??"0.5s",a=g(c.props.args.delay)??"0s";O=d?`animation: mfm-shake ${n} ease infinite; animation-delay: ${a};`:"";break}case"spin":{const n=c.props.args.left?"reverse":c.props.args.alternate?"alternate":"normal",a=c.props.args.x?"mfm-spinX":c.props.args.y?"mfm-spinY":"mfm-spin",o=g(c.props.args.speed)??"1.5s",e=g(c.props.args.delay)??"0s";O=d?`animation: ${a} ${o} linear infinite; animation-direction: ${n}; animation-delay: ${e};`:"";break}case"jump":{const n=g(c.props.args.speed)??"0.75s",a=g(c.props.args.delay)??"0s";O=d?`animation: mfm-jump ${n} linear infinite; animation-delay: ${a};`:"";break}case"bounce":{const n=g(c.props.args.speed)??"0.75s",a=g(c.props.args.delay)??"0s";O=d?`animation: mfm-bounce ${n} linear infinite; transform-origin: center bottom; animation-delay: ${a};`:"";break}case"flip":{O=`transform: ${c.props.args.h&&c.props.args.v?"scale(-1, -1)":c.props.args.v?"scaleY(-1)":"scaleX(-1)"};`;break}case"x2":return _("span",{class:"mfm-x2"},h(c.children,E*2));case"x3":return _("span",{class:"mfm-x3"},h(c.children,E*3));case"x4":return _("span",{class:"mfm-x4"},h(c.children,E*4));case"font":{const n=c.props.args.serif?"serif":c.props.args.monospace?"monospace":c.props.args.cursive?"cursive":c.props.args.fantasy?"fantasy":c.props.args.emoji?"emoji":c.props.args.math?"math":null;n&&(O=`font-family: ${n};`);break}case"blur":return _("span",{class:"_mfm_blur_"},h(c.children,E));case"rainbow":{if(!d)return _("span",{class:"_mfm_rainbow_fallback_"},h(c.children,E));const n=g(c.props.args.speed)??"1s",a=g(c.props.args.delay)??"0s";O=`animation: mfm-rainbow ${n} linear infinite; animation-delay: ${a};`;break}case"sparkle":{if(!d)return h(c.children,E);break}case"rotate":{O=`transform: rotate(${parseFloat(p(c.props.args.deg)??"90")}deg); transform-origin: center center;`;break}case"position":{const n=parseFloat(p(c.props.args.x)??"0"),a=parseFloat(p(c.props.args.y)??"0");O=`transform: translateX(${n}em) translateY(${a}em);`;break}case"scale":{const n=Math.min(parseFloat(p(c.props.args.x)??"1"),5),a=Math.min(parseFloat(p(c.props.args.y)??"1"),5);O=`transform: scale(${n}, ${a});`,E=E*Math.max(n,a);break}case"fg":{let n=p(c.props.args.color);(!n||!/^[0-9a-f]{3,6}$/i.test(n))&&(n="f00"),O=`color: #${n};`;break}case"bg":{let n=p(c.props.args.color);(!n||!/^[0-9a-f]{3,6}$/i.test(n))&&(n="f00"),O=`background-color: #${n};`;break}case"ruby":if(c.children.length===1){const n=c.children[0];let a=n.type==="text"?n.props.text:"";return _("ruby",{},[a.split(" ")[0],_("rt",a.split(" ")[1])])}else{const n=c.children.at(-1);let a=n.type==="text"?n.props.text:"";return _("ruby",{},[...h(c.children.slice(0,c.children.length-1),E),_("rt",a.trim())])}case"unixtime":{const n=c.children[0];return parseInt(n.type==="text"?n.props.text:""),_("span",{style:"display: inline-block; font-size: 90%; border: solid 1px var(--divider); border-radius: 999px; padding: 4px 10px 4px 6px;"},[_("i",{class:"ti ti-clock",style:"margin-right: 0.25em;"})])}case"clickable":return _("span",{onClick(n){n.stopPropagation(),n.preventDefault(),m.emit("clickEv",p(c.props.args.ev)??"")}},h(c.children,E))}return O===void 0?_("span",{},["$[",c.props.name," ",...h(c.children,E),"]"]):_("span",{style:"display: inline-block; "+O},h(c.children,E))}case"small":return[_("small",{style:"opacity: 0.7;"},h(c.children,E))];case"center":return[_("div",{style:"text-align:center;"},h(c.children,E))];case"url":return[c.props.url];case"link":return h(c.children,E,!0);case"mention":return[c.props.username];case"hashtag":return[`#${c.props.hashtag}`];case"blockCode":return[c.props.code];case"inlineCode":return[c.props.code];case"quote":return u.nowrap?[_("span",{style:W},h(c.children,E,!0))]:[_("div",{style:W},h(c.children,E,!0))];case"emojiCode":return[`:${c.props.name}:`];case"unicodeEmoji":return[c.props.emoji];case"mathInline":return[_("code",c.props.formula)];case"mathBlock":return[_("code",c.props.formula)];case"search":return[c.props.query];case"plain":return[_("span",h(c.children,E,!0))];default:return console.error("unrecognized ast type:",c.type),[]}}).flat(1/0);return _("span",{style:u.nowrap?"white-space: pre; word-wrap: normal; overflow: hidden; text-overflow: ellipsis;":"white-space: pre-wrap;"},h(l,u.rootScale??1))}const Ed={component:pd},C={render(u){return{components:{Mfm:pd},setup(){return{args:u}},computed:{props(){return{...this.args}}},template:'<Mfm v-bind="props" />'}},args:{text:"@ai *Hello*, #Miskist! ❤"},parameters:{layout:"centered"}},D={...C,args:{...C.args,plain:!0}},H={...C,args:{...C.args,nowrap:!0}},R={...C,args:{...C.args,isNote:!1}};var V,Z,x;C.parameters={...C.parameters,docs:{...(V=C.parameters)==null?void 0:V.docs,source:{originalSource:`{
  render(args) {
    return {
      components: {
        Mfm
      },
      setup() {
        return {
          args
        };
      },
      computed: {
        props() {
          return {
            ...this.args
          };
        }
      },
      template: '<Mfm v-bind="props" />'
    };
  },
  /*
    async play({ canvasElement, args }) {
        const canvas = within(canvasElement);
        if (args.plain) {
            const aiHelloMiskist = canvas.getByText('@ai *Hello*, #Miskist!');
            await expect(aiHelloMiskist).toBeInTheDocument();
        } else {
            const ai = canvas.getByText('@ai');
            await expect(ai).toBeInTheDocument();
            await expect(ai.closest('a')).toHaveAttribute('href', '/@ai');
            const hello = canvas.getByText('Hello');
            await expect(hello).toBeInTheDocument();
            await expect(hello.style.fontStyle).toBe('oblique');
            const miskist = canvas.getByText('#Miskist');
            await expect(miskist).toBeInTheDocument();
            await expect(miskist).toHaveAttribute('href', args.isNote ?? true ? '/tags/Miskist' : '/user-tags/Miskist');
        }
        const heart = canvas.getByAltText('❤');
        await expect(heart).toBeInTheDocument();
        await expect(heart).toHaveAttribute('src', '/twemoji/2764.svg');
    },*/
  args: {
    text: '@ai *Hello*, #Miskist! ❤'
  },
  parameters: {
    layout: 'centered'
  }
} satisfies StoryObj<typeof Mfm>`,...(x=(Z=C.parameters)==null?void 0:Z.docs)==null?void 0:x.source}}};var dd,ud,ed;D.parameters={...D.parameters,docs:{...(dd=D.parameters)==null?void 0:dd.docs,source:{originalSource:`{
  ...Default,
  args: {
    ...Default.args,
    plain: true
  }
} satisfies StoryObj<typeof Mfm>`,...(ed=(ud=D.parameters)==null?void 0:ud.docs)==null?void 0:ed.source}}};var rd,fd,cd;H.parameters={...H.parameters,docs:{...(rd=H.parameters)==null?void 0:rd.docs,source:{originalSource:`{
  ...Default,
  args: {
    ...Default.args,
    nowrap: true
  }
} satisfies StoryObj<typeof Mfm>`,...(cd=(fd=H.parameters)==null?void 0:fd.docs)==null?void 0:cd.source}}};var nd,td,ad;R.parameters={...R.parameters,docs:{...(nd=R.parameters)==null?void 0:nd.docs,source:{originalSource:`{
  ...Default,
  args: {
    ...Default.args,
    isNote: false
  }
} satisfies StoryObj<typeof Mfm>`,...(ad=(td=R.parameters)==null?void 0:td.docs)==null?void 0:ad.source}}};const Od=["Default","Plain","Nowrap","IsNotNote"];export{C as Default,R as IsNotNote,H as Nowrap,D as Plain,Od as __namedExportsOrder,Ed as default};
